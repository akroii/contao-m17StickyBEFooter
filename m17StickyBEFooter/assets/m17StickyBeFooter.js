/* Stcky Footer for Contao
 * @author: Joe Ray Gregory aka may17
 * @copyright: Joe Ray Gregory 2012 joe@may17.de
 * @license LGPL
 */
(function(){M17StickyFooter={init:function(){var a=document.getElement(".tl_formbody_submit")||false,d,c,e,b=this;if(a){this.footerData=this.generateSubmitObj(a);this.generateOffset();this.setStickyPosition(a);d=this.setItem.bind(this);window.addEvents({scroll:d,resize:d,ajax_change:d});window.addEvent("resize",this.setStickyPosition.bind(this).pass(a));c=$$("fieldset");c.addEvent("click:relay(legend)",function(f){b.setItem()});c.addEvent("click:relay(input.tl_checkbox[onclick])",function(f){b.setItem()});e=document.id("tog")||false;if(e){e.addEvent("click",function(){b.setItem()})}}},generateSubmitObj:function(a){var b=a.getFirst();return{item:a,submitContainer:b,height:b.getHeight(),width:b.getStyle("width"),offset:0,position:b.getCoordinates()}},generateOffset:function(){var a=document.getElement("div#debug")||false;if(a){var b=a.getElement("p").getSize().y+a.getElement("div").getSize().y-1;this.footerData.submitContainer.setStyle("bottom",b);this.footerData.offset=b}},setStickyPosition:function(a){this.footerData.submitContainer.setStyle("left",a.getPosition().x);console.log("action")},setItem:function(h){var i=this.generateOffset(),b=this.footerData.item.getPosition().y+this.footerData.height+this.footerData.offset,g=window,f=b-g.getHeight(),d=document.body,c="stickySave",a=g.getScroll().y.toInt();if(a>f){d.removeClass(c)}else{if(!d.hasClass(c)){this.footerData.submitContainer.setStyle("width",this.footerData.width);d.addClass(c)}}}};window.addEvent("domready",function(){M17StickyFooter.init();this.scrollTo(0,1)})})();